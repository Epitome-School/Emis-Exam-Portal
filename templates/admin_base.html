{# templates/admin_base.html #}
{% extends "base.html" %}

{% block title %}Admin - EMIS Exam Portal{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin1.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin2.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/doc_upload.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/user-credential.css') }}">
{% endblock %}

{% block header_actions %}
<div class="flex items-center gap-3 md:gap-6">
  <button id="cmdBtn" class="relative text-gray-600 hover:text-navy">⌘K</button>
  <button id="themeToggleHeader" class="relative text-gray-600 hover:text-navy">🌗</button>
  <button id="notifBtnHeader" class="relative text-gray-600 hover:text-navy">
    🔔 <span id="notifCountHeader" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full hidden">0</span>
  </button>
  <a href="{{ url_for('logout') }}" class="btn-logout">Logout</a>
</div>
{% endblock %}

{% block content %}
<div class="admin-shell min-h-screen bg-admin bg-frost" data-theme="light">

  <!-- Sidebar -->
  <aside id="adminSidebar" class="sidebar">
    <div class="sidebar-head">
      <div class="brand">
        <img src="{{ url_for('static', filename='images/logo.jpg') }}" alt="EMIS" class="brand-logo">
        <div class="brand-text">
          <div class="brand-title">EMIS Admin</div>
          <div class="brand-sub">Epitome Model Islamic Schools</div>
        </div>
      </div>
      <button id="sidebarToggle" class="sidebar-toggle">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>
    </div>

    <nav class="sidebar-nav" role="navigation">
      <a href="{{ url_for('admin.dashboard') }}" class="nav-item"><span class="nav-ico">🏠</span><span class="nav-label">Dashboard</span></a>
      <a href="{{ url_for('admin.uploads') }}" class="nav-item"><span class="nav-ico">📂</span><span class="nav-label">Uploads</span></a>

      <!-- Exams group -->
      <div class="nav-group">
        <button class="nav-item nav-parent" data-submenu="#menu-exams">
          <span class="nav-ico">🧪</span>
          <span class="nav-label">Exams</span>
          <span class="nav-caret">▸</span>
        </button>
        <div id="menu-exams" class="nav-sub">
          <a href="{{ url_for('admin.push') }}" class="nav-subitem"><span>Push to Exam</span></a>
          <a href="{{ url_for('admin.link') }}" class="nav-subitem"><span>Generate Link</span></a>
          <a href="{{ url_for('admin.credentials') }}" class="nav-subitem"><span>Generate Credentials</span></a>
          <a href="{{ url_for('admin.manage') }}" class="nav-subitem"><span>Manage Credentials</span></a>
          <a href="{{ url_for('admin.results') }}" class="nav-subitem"><span>Results</span></a>
        </div>
      </div>

      <a href="{{ url_for('admin.candidates') }}" class="nav-item"><span class="nav-ico">👥</span><span class="nav-label">Candidates</span></a>
      <a href="{{ url_for('admin.notifications') }}" class="nav-item"><span class="nav-ico">🔔</span><span class="nav-label">Notifications</span></a>
      <a href="{{ url_for('admin.activity') }}" class="nav-item"><span class="nav-ico">🕒</span><span class="nav-label">Activity</span></a>
      <a href="{{ url_for('admin.status') }}" class="nav-item"><span class="nav-ico">⚙️</span><span class="nav-label">System Status</span></a>
      <a href="{{ url_for('admin.tools') }}" class="nav-item"><span class="nav-ico">⚡</span><span class="nav-label">Quick Tools</span></a>
      <a href="{{ url_for('admin.settings') }}" class="nav-item"><span class="nav-ico">🛠️</span><span class="nav-label">Settings</span></a>
      <a href="{{ url_for('admin.help') }}" class="nav-item"><span class="nav-ico">❓</span><span class="nav-label">Help</span></a>
      <a href="{{ url_for('candidate.login') }}" target="_blank" class="nav-item"><span class="nav-ico">🔗</span><span class="nav-label">Candidate Login</span></a>
    </nav>

    <div class="sidebar-foot">
      <button id="themeToggle" class="sidebar-foot-btn">🌗 Theme</button>
      <a href="{{ url_for('logout') }}" class="sidebar-foot-btn">🚪 Logout</a>
    </div>
  </aside>

  <!-- Main Content -->
  <section class="content-area">
    <div class="topbar">
      <div class="topbar-left">
        <h1 class="page-title">{% block page_title %}{% endblock %}</h1>
        <div class="breadcrumbs">{% block breadcrumbs %}{% endblock %}</div>
      </div>
      <div class="topbar-right">
        <div class="search-wrap">
          <span class="search-ico">🔎</span>
          <input type="search" class="search-input" placeholder="Search…" />
        </div>
        <button id="cmdBtnTop" class="topbar-btn">⌘K</button>
        <button id="notifBtn" class="topbar-btn">🔔 <span id="notifCount" class="badge hidden">0</span></button>
        <div class="profile-menu">
          <button id="profileBtn" class="profile-btn">👤 {{ session.username }}</button>
          <div id="profileMenu" class="profile-dropdown hidden">
            <a class="profile-item" href="{{ url_for('admin.settings') }}">Settings</a>
            <a class="profile-item" href="{{ url_for('logout') }}">Logout</a>
          </div>
        </div>
      </div>
    </div>

    {% block admin_content %}{% endblock %}
  </section>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/admin1.js') }}"></script>
<script src="{{ url_for('static', filename='js/admin2.js') }}"></script>
<script src="{{ url_for('static', filename='js/user-credential.js') }}"></script>
<script src="{{ url_for('static', filename='js/doc_upload.js') }}"></script>
{% endblock %}
